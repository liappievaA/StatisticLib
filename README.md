### README

# Тестирование волатильности с использованием перекрывающихся наблюдений - Clyton.ipynb

Этот репозиторий содержит реализацию подхода к тестированию волатильности на основе перекрывающихся наблюдений, описанного в статье *"Backtesting Volatility Assumptions Using Overlapping Observations"* Майкла А. Клейтона.

---

## Описание

### Реализованные тесты
1. **Тест Колмогорова-Смирнова (KS)**:
   - Проверяет равномерность стандартизированных наблюдений.
2. **Тест Андерсона-Дарлинга (AD)**:
   - Более чувствителен к отклонениям в концах распределения.
3. **Тест отношения правдоподобия (LR)**:
   - Сравнивает наблюдаемую дисперсию с ожидаемой.

### Варианты тестирования
- **Без перекрытия интервалов**: Наблюдения не пересекаются.
- **С перекрытием интервалов**: Наблюдения частично пересекаются, что приводит к корреляции.

### Модифицированные тесты
- **KSρ, ADρ, LRρ**:
  - Скорректированные версии тестов, учитывающие корреляции, вызванные перекрывающимися интервалами.

---

## Основные возможности
1. **Обработка данных**:
   - Импорт данных из форматов CSV, Excel или JSON.
   - Генерация синтетических временных рядов на основе нормальной диффузионной модели.

2. **Реализация тестов**:
   - Стандартные тесты (KS, AD, LR).
   - Модифицированные версии тестов (KSρ, ADρ, LRρ) с учетом корреляций.

3. **Аналитические инструменты**:
   - Монте-Карло симуляции для генерации распределений тестовых статистик.
   - Построение ROC-кривых и расчет показателя True Positive Rate (TPR).
   - Оценка дискриминационной мощности (DP) для ранжирования тестов.

4. **Визуализация и экспорт**:
   - Построение графиков распределений и ROC-кривых.
   - Экспорт результатов в формате CSV или PDF.

---

## Функциональные и системные требования

### Функциональные требования
- Импорт данных временных рядов из популярных форматов (CSV, Excel, JSON).
- Расчет тестовых статистик для стандартных и модифицированных тестов.
- Проведение Монте-Карло симуляций для проверки гипотез.
- Поддержка анализа перекрывающихся и неперекрывающихся наблюдений.
- Экспорт результатов в виде таблиц и графиков.

### Системные требования
- **Операционная система**: Windows, macOS или Linux.
- **Версия Python**: Python 3.7 или выше.
- **Необходимые библиотеки**:
  - `NumPy` (генерация данных, матричные вычисления)
  - `SciPy` (статистические расчеты)
  - `Matplotlib` (визуализация данных)
  - `Pandas` (обработка временных рядов)
- **Оборудование**:
  - Минимум: 4 ГБ ОЗУ.
  - Рекомендуется: многопроцессорная архитектура для выполнения Монте-Карло симуляций.

---

## Установка

### Предварительные требования
1. Установите Python версии 3.7 или выше.
2. Установите необходимые библиотеки:
   ```bash
   pip install numpy scipy matplotlib pandas
   ```

---

## Использование

### Пример работы
1. **Импорт временных рядов**:
   Поместите данные из архива path в папку с именем "path" в директорию с файлом clayton.ipynb.

2. **Запуск тестов**:
   Выполните скрипт для проведения тестов (KS, AD, LR) с перекрывающимися или неперекрывающимися наблюдениями.

3. **Визуализация результатов**:
   Скрипт создаст графики распределений тестовых статистик и ROC-кривых.

4. **Экспорт результатов**:
   Результаты можно сохранить в формате CSV или PDF для дальнейшего анализа.

---

### Детали реализации

1. **Используемые библиотеки**:
   - `NumPy`: для генерации случайных данных, создания ковариационных матриц и работы с многомерными нормальными распределениями.
   - `Matplotlib`: для построения графиков плотности.
   - `Pandas`: для обработки данных временных рядов.
   - `SciPy`: для статистических расчетов (например, кумулятивные распределения).
   - `Warnings`: для подавления незначительных предупреждений.

2. **Ключевые компоненты**:
   - **Класс `ArithmeticBrownianMotion`**:
     - Имитация процесса арифметического броуновского движения (ABM) с учетом параметров:
       - Волатильность (`sigma`),
       - Горизонт тестирования (`h`),
       - Частота обновления (`d`),
       - Количество симуляций (`n_paths`).
     - Основные методы:
       - `get_paths`: Генерация траекторий временных рядов с использованием метода Эйлера.
       - `get_stationary_value`: Расчет стационарных значений, нормализованных по волатильности.
       - `get_uniform_value`: Преобразование значений в униформные (для использования в тестах).
   - **Функция `covariation_matrix`**:
     - Создает ковариационную матрицу для моделирования зависимости между перекрывающимися временными интервалами.
   - **Функции анализа распределений**:
     - `density_sample_series`: Вычисляет и визуализирует плотность распределения для одномерных данных.
     - `density_sample_dataframe`: Вычисляет среднюю плотность распределения для многомерных временных рядов.

3.**Реализованные элементы из статьи**:
   - Стандартные тесты: KS, AD, LR.
   - Модифицированные тесты: KSρ, ADρ, LRρ.
   - Монте-Карло симуляции для расчетов.
   - Построение графиков для анализа распределений и мощности тестов.
